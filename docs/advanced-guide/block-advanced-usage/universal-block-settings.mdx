---
sidebar_position: 1
draft: true
---

import Image from "@theme/ThemedImage";
import useBaseUrl from "@docusaurus/useBaseUrl";

# Universal Block Settings

This article will describe in detail the common settings and usage methods shared by all blocks.

## Node Menu

When a block is used within a workflow, it is referenced as a node in the workflow, and the block will display a node menu.

<Image
  sources={{
    light: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/node-menu.png"
    ),
    dark: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/node-menu.png"
    ),
  }}
  width="720"
/>

### Run

There are two execution methods in the node menu. Users can choose whether to use the cache from the previous run. Both methods will start the workflow and run up to the current node.

<Image
  sources={{
    light: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/node-run-button.png"
    ),
    dark: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/node-run-button.png"
    ),
  }}
  width="720"
/>

The difference is whether to use the results from the previous node execution as input for downstream nodes.

#### Cache Mechanism

Considering that blocks may execute high resource-consuming or very time-consuming tasks, users may not want to repeat these tasks. Therefore, we designed a node caching mechanism.

After any node executes successfully, except for interfaces of type [variable](/docs/advanced-guide/block-advanced-usage/universal-block-settings#variable), all node output interfaces will retain the output values from the previous execution. This way, when downstream nodes choose to execute, they will automatically use cached values without triggering upstream node execution.

Users can also choose "Clear cache and execute", which will make the current run not use cache, trigger upstream node execution, and get the latest output values.

:::info
If the current node's upstream output interface has variable types, running will always trigger upstream node execution regardless, because we cannot cache variables in the code execution environment.
:::

### Copy

Copy the current node within the workflow. You can also use shortcuts `ctrl + c`(Windows) / `cmd + c`(MacOS) to copy, `ctrl + v`(Windows) / `cmd + v`(MacOS) to paste.

Using shortcuts allows copying and pasting across different workflows.

Copy behavior differs for scriptlet blocks and shared blocks:

- Scriptlet blocks

  Copying will create a new block in the workflow, including the block's configuration files and code, resulting in two independent scriptlet blocks that don't affect each other.

- Shared blocks

  Copying only creates a reference to the shared block in the workflow as a new node. Both nodes point to the same block with the same code, so [configuring](/docs/advanced-guide/block-advanced-usage/universal-block-settings#block-configuration) the shared block will affect both nodes simultaneously.

### Node Configuration

Node configuration only takes effect within the current workflow. Each node's configuration is independent and doesn't affect other nodes.

#### Basic Information

For icons and titles, you can configure them in the menu or in the node header. Double-click the title to enter a new title.

<Image
  sources={{
    light: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/node-base-config.png"
    ),
    dark: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/node-base-config.png"
    ),
  }}
  width="720"
/>

Node ID should be unique within the current workflow.

Node description can be entered in the configuration menu, or you can select the node and double-click "Add description" below to enter the node description.

<Image
  sources={{
    light: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/node-config-description.png"
    ),
    dark: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/node-config-description.png"
    ),
  }}
  width="720"
/>

#### Timeout

Used to limit the maximum runtime of the current node. If not set, there is no timeout by default.

### Ignore

Click "Ignore this node" to set the node to ignore status. When running the current flow, this node and subsequent nodes will be skipped.

<Image
  sources={{
    light: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/node-ignore.png"
    ),
    dark: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/node-ignore.png"
    ),
  }}
  width="720"
/>

The ignore function can be used to debug workflow execution under different execution paths, for example:

<Image
  sources={{
    light: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/node-ignore-flow.png"
    ),
    dark: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/node-ignore-flow.png"
    ),
  }}
  width="720"
/>

Users can toggle the ignore status of nodes to restrict the workflow to run under certain conditions.

### Delete

<Image
  sources={{
    light: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/node-delete.png"
    ),
    dark: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/node-delete.png"
    ),
  }}
  width="720"
/>

The delete function can remove the current node. You can use the menu button or shortcut `ctrl + shift + delete`(Windows) / `cmd + shift + delete`(MacOS). This function has different behavioral logic for scriptlet blocks and shared blocks:

- Scriptlet blocks

Will delete the node and the scriptlet block, including block configuration and code files.

- Shared blocks

Will only delete the node within the workflow; the shared block itself will not be deleted.

## Block Configuration

Since scriptlet blocks can only be created and used within workflows, scriptlet blocks have both node and block attributes, causing the node configuration and block configuration of scriptlets to be merged together.

Block configuration has different entry points for scriptlet blocks and shared blocks, but the effects are the same.

Universal block configuration includes executor and interface configuration.

### Executor

The executor is used to specify the entry file and invocation method when the current block runs.

Each code language environment has an executor for running code.

<Image
  sources={{
    light: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-config-executor.png"
    ),
    dark: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-config-executor.png"
    ),
  }}
  width="720"
/>

#### Name

Currently, executors are implemented internally by the oomol team and support python and nodejs runtime environments, so there are two corresponding options.

#### Entry

Select the code entry file. The default file is generated when users create scriptlet blocks. If there are no special requirements, no changes are needed. Users can also specify any file, but must ensure implementation according to the code template, otherwise it won't run properly.

Refer to [nodejs template](/docs/workflow-engine/nodejs-sdk-api#21-scriptlet-template) and [python template](/docs/workflow-engine/python-sdk-api#21-scriptlet-template)

#### Method Name

Specify the code entry method name. Default is the main method of the entry file (python code) or default export function (nodejs code). You can specify custom methods if needed, but must include method parameters from the template code.

#### Independent Process

When oomol studio runs workflows, it performs automatic detection. If upstream and downstream blocks are implemented in the same code language (for shared blocks, they must also belong to the same package), the internal scheduler will place both block codes in the same process for invocation. The benefits are:

1. Resource saving
2. Allows upstream and downstream to directly pass code variables, eliminating serialization and deserialization steps for output interface values, simplifying code.

Considering users may have special situations, we also allow users to choose whether to run blocks in independent processes.

### Interface Configuration

Interface configuration is divided into input interface and output interface configuration. Output interfaces have the same configuration items as input configuration except they cannot specify interface values.

<Image
  sources={{
    light: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config.png"
    ),
    dark: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config.png"
    ),
  }}
  width="720"
/>

#### Interface Name

The name of the input or output interface. Users can specify custom names. When the name is modified, the corresponding input or output parameter types in the code will also be automatically updated.

#### Null Value Passing

Configure whether this interface allows passing `null` (nodejs code) / `None` (python code) as values. This option is mainly used to restrict input or output types.

This option affects automatically generated types in code and upstream-downstream connection behavior.

If upstream allows outputting `null` / `None` values but downstream doesn't allow it, the connection will error.

<Image
  sources={{
    light: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-null.png"
    ),
    dark: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-null.png"
    ),
  }}
  width="720"
/>

#### Custom Type Name

Used for users to customize interface connection validation rules. If users set this value, all other interfaces connecting to this interface must set the same value, otherwise the connection will fail.

<Image
  sources={{
    light: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-custom-type.png"
    ),
    dark: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-custom-type.png"
    ),
  }}
  width="720"
/>

#### Description

Interface descriptions are not displayed and can only be seen in interface settings.

#### Preset Type

Interfaces can be configured with preset types to restrict connectable interfaces and automatically generate configured types in code.

Selecting different types will change the preset type sub-configuration items and data input fields.

- No Constraints

The interface has no restrictions and can connect to any other interface.

After selecting no constraints type, the right data input field will have a data type button for selecting input value types, which doesn't affect interface type restrictions.

<Image
  sources={{
    light: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-type-any.png"
    ),
    dark: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-type-any.png"
    ),
  }}
  width="720"
/>

- String

Interface value is string type.

Sub-configuration items can configure string format. If a format is selected, rules can be added to values, or you can specify custom regular expressions.

<Image
  sources={{
    light: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-type-string.png"
    ),
    dark: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-type-string.png"
    ),
  }}
  width="720"
/>

- Variable

Interface value is variable type.

For variable type interfaces, the connected interface must be the same language and variable type. If one side is a shared block, the other side needs to be a block from the same package.

After setting to variable type, the interface can pass complex format code objects, such as `DataFrame` or `pandas` instances in python.

In some scenarios where objects cannot be converted to strings or simple types, this method can be used for passing, and passing objects can eliminate serialization and deserialization steps, improving performance.

However, due to connection restrictions, variable type interfaces may reduce block universality, so use with caution.

<Image
  sources={{
    light: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-type-var.png"
    ),
    dark: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-type-var.png"
    ),
  }}
  width="720"
/>

- Number

Interface value is number type.

Number type can be floating point or integer, any number type is allowed.

Sub-configuration items can set number range restrictions. In the block's data control, buttons can adjust numerical values. The step size in sub-configuration items is used to configure the numerical increase or decrease per button click.

<Image
  sources={{
    light: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-type-number.png"
    ),
    dark: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-type-number.png"
    ),
  }}
  width="720"
/>

- Path

Interface value is address string type, can connect to other string type interfaces.

Sub-options include `directory` / `file` / `save as`. The `directory` / `file` options require the corresponding address to exist before selection in data controls, while `save as` option can create non-existent files or folders.

<Image
  sources={{
    light: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-type-path.png"
    ),
    dark: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-type-path.png"
    ),
  }}
  width="720"
/>

- Secret

Interface value is encrypted string type, can connect to other string type interfaces.

Considering users may use private strings like API Keys in certain scenarios, we provide secret functionality to prevent user sensitive information leakage.

Users can add secrets in the [secret management page](/docs/get-started/interface/home/#secrets-page) on the homepage or [secret management page within project interface](/docs/get-started/interface/project#secrets).

Then they can select and use them in secret type interfaces.

<Image
  sources={{
    light: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-type-secret.png"
    ),
    dark: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-type-secret.png"
    ),
  }}
  width="720"
/>

- Boolean

Interface value is boolean type, only has `True` / `False` two values that can be set, can be toggled with a switch.

<Image
  sources={{
    light: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-type-bool.png"
    ),
    dark: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-type-bool.png"
    ),
  }}
  width="720"
/>

- Integer

Interface value is integer number type.

Sub-configuration items are the same as number type, but cannot connect to number type interfaces because number type might be floating point.

<Image
  sources={{
    light: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-type-int.png"
    ),
    dark: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-type-int.png"
    ),
  }}
  width="720"
/>

- Color

Interface value is color format string type, can connect to other string type interfaces.

After selecting color type, you can use color selection controls in the data input field. In sub-configuration items, we provide `HEX` / `HEX8` / `HSV` / `RGB` four color format options.

<Image
  sources={{
    light: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-type-color.png"
    ),
    dark: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-type-color.png"
    ),
  }}
  width="720"
/>

- Multiline Text

Interface value is string type, can connect to other string type interfaces.

This type mainly facilitates users entering large text blocks in data input fields, avoiding text folding that makes observation inconvenient.

Drag the button in the bottom right corner of the text box to change text box height.

<Image
  sources={{
    light: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-type-text.png"
    ),
    dark: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-type-text.png"
    ),
  }}
  width="720"
/>

- Dictionary

Interface value is dictionary type.

For `nodejs`, equivalent to plain object; for `python`, equivalent to dictionary object.

You can set the type of each dictionary element for dictionary type interfaces. The plus and minus buttons on the right can add or delete sub-elements.

In sub-configuration items, there's an `Allow additional properties` configuration, indicating whether the current interface allows elements other than those specified in the interface type. For example:

With `Allow additional properties` enabled, if the interface type is:

```
{
  field1: number,
  field2: string
}
```

Then passing the value:

```
{
  field1: 1,
  field2: "2",
  field3: {}
}
```

is allowed, and `field3` as an additional property has no type restrictions.

If `Allow additional properties` is disabled, no additional properties are allowed.

<Image
  sources={{
    light: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-type-dict.png"
    ),
    dark: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-type-dict.png"
    ),
  }}
  width="720"
/>

- Array

Interface value is array type.

For `nodejs`, equivalent to array object; for `python`, equivalent to list object.

Selecting sub-type in the data input field or selecting `Item type` in sub-configuration items can constrain all array elements to the same type. If `No constraints` type is selected, each element in the array can be different types.

<Image
  sources={{
    light: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-type-array.png"
    ),
    dark: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-type-array.png"
    ),
  }}
  width="720"
/>

- Select

If single select, interface value is enumerated string type; if multi-select, it's an array type with string type items.

When using select type, you need to configure preset options in sub-configuration items first, then selectable content will appear in the data input field.

> Single Select

<Image
  sources={{
    light: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-type-single-select.png"
    ),
    dark: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-type-single-select.png"
    ),
  }}
  width="720"
/>

> Multi-Select

<Image
  sources={{
    light: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-type-multi-select.png"
    ),
    dark: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-type-multi-select.png"
    ),
  }}
  width="720"
/>

- Date

Interface value is date format string.

Date format is 'YYYY-MM-DD hh:mm:ss'

Sub-configuration items can select `date` / `time` / `date-time`, corresponding to date only, time only, and date plus time respectively. Different options will cause changes in the selection interface.

<Image
  sources={{
    light: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-type-date.png"
    ),
    dark: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-type-date.png"
    ),
  }}
  width="720"
/>

- Binary

Interface value is binary type.

Although this type of value can be serialized, it cannot be meaningfully displayed, so there's no corresponding representation and configuration in the interface. This type of interface can only be connected and cannot set values through data input fields.

Can be used for special scenarios, such as upstream reading a file and passing it to downstream, or upstream outputting memory data to downstream. Downstream decides whether to serialize the binary or store it as a file.

<Image
  sources={{
    light: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-type-binary.png"
    ),
    dark: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-type-binary.png"
    ),
  }}
  width="720"
/>

- Null

Interface value is fixed as null(for nodejs) / None(for python) value.

After type selection, no other type values can be set, generally used for debugging and other special scenarios.

<Image
  sources={{
    light: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-type-null.png"
    ),
    dark: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-type-null.png"
    ),
  }}
  width="720"
/>

- Combiner

Interface value needs to meet set combination conditions.

Currently supported combiner is `Any one`, meaning interface value only needs to meet any one of the conditions.

After selecting combiner, you need to configure conditions to be met in sub-configuration items. For example:

Configure condition 1 type as number, condition 2 type as string, then input values that are numbers or strings are both legal.

<Image
  sources={{
    light: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-type-combine.png"
    ),
    dark: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-type-combine.png"
    ),
  }}
  width="720"
/>

- LLM

A special interface type providing two sub-options: `model` / `message`.

This interface type provides users with a series of parameters convenient for using AI models in code.

<Image
  sources={{
    light: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-type-LLM.png"
    ),
    dark: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-type-LLM.png"
    ),
  }}
  width="720"
/>

When selecting `model`, the input interface will be converted to an AI model selection interface. This interface cannot be connected, and input values are fixed to user-selected and configured model parameters.

After selecting `model`, you can see the output interface type changes. Users can now get model parameters configured in the interface through the input interface.

:::info
Users still need to create model invocation clients themselves to integrate AI in code. This interface only provides configurable parameters to allow blocks to modify parameters through the interface during use and take effect, avoiding code modification.
:::

<Image
  sources={{
    light: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-type-LLM-model.png"
    ),
    dark: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-type-LLM-model.png"
    ),
  }}
  width="720"
/>

When selecting `message`, the input interface will be converted to AI prompt input. This interface cannot be connected.

After selecting `message`, you can see the output interface type changes. Users can now get prompt parameters configured in the interface through the input interface.

<Image
  sources={{
    light: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-type-LLM-message.png"
    ),
    dark: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-type-LLM-message.png"
    ),
  }}
  width="720"
/>

Users can configure multiple prompts on input interfaces.

When users want to change LLM type input interfaces back to normal interfaces, they need to select other types in the interface configuration panel:

<Image
  sources={{
    light: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-type-LLM-return.png"
    ),
    dark: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-type-LLM-return.png"
    ),
  }}
  width="720"
/>

#### JsonSchema

When users are not satisfied with interface constraint conditions created on the page, they can edit the interface's [JsonSchema](https://json-schema.org/understanding-json-schema/reference) constraint file themselves. Click the toggle button in the upper right corner of the configuration panel:

<Image
  sources={{
    light: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-type-jsonschema.png"
    ),
    dark: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-config-type-jsonschema.png"
    ),
  }}
  width="720"
/>

You can switch to [JsonSchema](https://json-schema.org/understanding-json-schema/reference) editing mode.

JsonSchema modifications will be reflected in the interface configuration panel as much as possible, and configuration panel changes will also be reflected in the JsonSchema editor.

### Quick Create Node

Users can drag directly from input or output interfaces to any blank area to quickly create new nodes.

<Image
  sources={{
    light: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-quick-create-node.gif"
    ),
    dark: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-quick-create-node.gif"
    ),
  }}
  width="720"
/>

### Interface Order

When hovering over an interface, you can see buttons on the left side of the interface. Drag to adjust interface order.

<Image
  sources={{
    light: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-order.gif"
    ),
    dark: useBaseUrl(
      "/img/docs/advanced-guide/advanced-block-usage/block-handle-order.gif"
    ),
  }}
  width="720"
/>
