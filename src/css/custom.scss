@use "./font.scss" as *;
@use "./design-tokens.scss" as *;

:root {
  --ifm-color-primary: #7d7fe9;
  --ifm-color-primary-dark: #5e61e4;
  --ifm-color-primary-darker: #4f52e1;
  --ifm-color-primary-darkest: #2428d6;
  --ifm-color-primary-light: #9c9dee;
  --ifm-color-primary-lighter: #abacf1;
  --ifm-color-primary-lightest: #d9d9f9;
  --ifm-code-font-size: 95%;
  --docusaurus-highlighted-code-line-bg: rgba(0, 0, 0, 0.1);
  --ifm-font-family-base:
    "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Ubuntu,
    "Helvetica Neue", Helvetica, Arial, "PingFang SC", "Hiragino Sans GB",
    "Microsoft YaHei UI", "Microsoft YaHei", "Source Han Sans CN", sans-serif;

  /* Light mode colors - 使用 design tokens */
  --ifm-navbar-background-color: var(--oomol-bg-base);
  --ifm-background-color: var(--oomol-bg-base);
  --ifm-font-color-base: var(--oomol-text-primary);
  --ifm-menu-color-background-hover: var(--oomol-hover-bg);
  --ifm-toc-link-color: var(--oomol-text-secondary);
  --ifm-navbar-link-color: var(--oomol-text-primary);
  --ifm-footer-background-color: var(--oomol-bg-base);
}

/* For readability concerns, you should choose a lighter palette in dark mode. */

[data-theme="dark"] {
  --ifm-color-primary: #7d7fe9;
  --ifm-color-primary-dark: #5e61e4;
  --ifm-color-primary-darker: #4f52e1;
  --ifm-color-primary-darkest: #2428d6;
  --ifm-color-primary-light: #9c9dee;
  --ifm-color-primary-lighter: #abacf1;
  --ifm-color-primary-lightest: #d9d9f9;
  --ifm-navbar-background-color: var(--oomol-bg-base);
  --ifm-background-color: var(--oomol-bg-base) !important;
  --ifm-font-color-base: var(--oomol-text-primary);
  --docusaurus-highlighted-code-line-bg: rgba(0, 0, 0, 0.3);
  --ifm-menu-color-background-hover: var(--oomol-hover-bg);
  --ifm-toc-link-color: var(--oomol-text-secondary);
  --ifm-navbar-link-color: var(--oomol-text-primary);
  --ifm-footer-background-color: var(--oomol-bg-base);
}

#__docusaurus {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
}

/* disabled 文档模块的方向箭头  */

.menu__caret::before {
  background: var(--ifm-menu-link-sublist-icon) 50% / 1.25rem 1.25rem;
}

// Docs 文档板块底部按钮的样式
.docusaurus-mt-lg {
  margin-top: 3rem;
}

.footer {
  background-color: var(--oomol-bg-base);
  margin-top: 48px;
  margin-bottom: 48px;
}

.footer__links {
  margin-bottom: 3rem;
  padding: 0 20% 0 23rem;
}

/* 移动端下的自定义样式 */

@media screen and (max-width: 996px) {
  .footer__links {
    padding: 0;
  }
}

.navbar {
  box-shadow: none;
  position: relative;

  &::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    backdrop-filter: blur(10px);
    z-index: -1;
  }

  .navbar__inner {
    justify-content: unset;
  }
}

/* Navbar link colors */
[data-theme="light"] {
  .navbar__link {
    color: var(--oomol-text-primary);

    &:hover {
      color: var(--oomol-primary);
    }
  }

  .navbar__link--active {
    color: var(--oomol-primary);
  }
}

/* ============================================
   响应式断点系统 (Responsive Breakpoints)
   基于标准的移动优先设计
   ============================================ */

// 标准断点定义
$breakpoint-xs: 375px; // 小手机
$breakpoint-sm: 640px; // 大手机
$breakpoint-md: 768px; // 平板
$breakpoint-lg: 1024px; // 笔记本
$breakpoint-xl: 1280px; // 桌面
$breakpoint-2xl: 1536px; // 大屏幕

// 为了向后兼容，保留旧的变量名作为别名
$mobile-width: $breakpoint-xs;
$mobile-middle-width: 390px;
$mobile-large-width: 430px;
$tablet-width: $breakpoint-sm;
$tablet-middle-width: $breakpoint-md;
$tablet-large-width: 820px;
$desktop-width: $breakpoint-xl;

// 推荐使用的新 mixin（标准命名）
@mixin respond-to($breakpoint) {
  @if $breakpoint == xs {
    @media (max-width: $breakpoint-xs) {
      @content;
    }
  } @else if $breakpoint == sm {
    @media (max-width: $breakpoint-sm) {
      @content;
    }
  } @else if $breakpoint == md {
    @media (max-width: $breakpoint-md) {
      @content;
    }
  } @else if $breakpoint == lg {
    @media (max-width: $breakpoint-lg) {
      @content;
    }
  } @else if $breakpoint == xl {
    @media (max-width: $breakpoint-xl) {
      @content;
    }
  } @else if $breakpoint == 2xl {
    @media (max-width: $breakpoint-2xl) {
      @content;
    }
  }
}

// 为了向后兼容，保留旧的 mixin
@mixin phone {
  @media (max-width: #{$mobile-width}) {
    @content;
  }
}

@mixin phone-middle {
  @media (max-width: #{$mobile-middle-width}) {
    @content;
  }
}

@mixin phone-large {
  @media (max-width: #{$mobile-large-width}) {
    @content;
  }
}

@mixin pad {
  @media (max-width: #{$tablet-width}) {
    @content;
  }
}

@mixin pad-middle {
  @media (max-width: #{$tablet-middle-width}) {
    @content;
  }
}

@mixin pad-large {
  @media (max-width: #{$tablet-large-width}) {
    @content;
  }
}

@mixin desktop {
  @media (max-width: #{$desktop-width}) {
    @content;
  }
}

@media (min-width: 997px) {
  :root {
    // TODO: 替换为新的 Navbar 样式后再恢复该样式
    // 已经手动调整 navbar 相关的样式，为了不让默认的影响新的样式，所以设为 0
    // --ifm-navbar-height: 0px;

    --ifm-navbar-height: 64px;
  }
}

@mixin linearGradientColor {
  background-image: linear-gradient(
    90deg,
    var(--oomol-text-tertiary) 0%,
    var(--oomol-text-secondary) 100%
  );
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

// 文档页面使用，用于在一行显示多个图片
.image-container {
  display: flex;
  gap: 10px;
  align-items: flex-start;
  justify-content: center;
  margin-bottom: 15px;

  &:has(> :nth-child(1)) {
    --sibling-count: 1;
  }

  &:has(> :last-child:nth-child(2)) {
    --sibling-count: 2;
  }

  &:has(> :last-child:nth-child(3)) {
    --sibling-count: 3;
  }

  & > img,
  & > div {
    width: calc(100% / var(--sibling-count));
  }

  & > div {
    text-align: center;
  }
}

@media screen and (max-width: 996px) {
  .image-container {
    display: grid;
    justify-items: center;

    & > img,
    & > div {
      width: 100%;
    }
  }
}

// 导航栏下拉菜单项图标样式
.navbar-item-with-icon {
  position: relative;
  padding-left: 28px !important;

  &::before {
    content: "";
    position: absolute;
    left: 8px;
    top: 50%;
    transform: translateY(-50%);
    width: 16px;
    height: 16px;
    margin-right: 4px;
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
  }
}

.navbar-item-studio::before {
  background-image: url("/img/products/studio.svg");
}

.navbar-item-hub::before {
  background-image: url("/img/products/hub.svg");
}

.navbar-item-app::before {
  background-image: url("/img/products/app.svg");
}

// 文档页面 sidebar 样式
.sidebar-submenu-item {
  > .menu__link {
    font-size: 16px;
    color: var(--oomol-text-primary);
  }

  .theme-doc-sidebar-item-link-level-2,
  .theme-doc-sidebar-item-category-level-2 > .menu__list-item-collapsible,
  .theme-doc-sidebar-item-link-level-3 {
    font-size: 14px;

    > .menu__link {
      color: var(--oomol-text-secondary) !important;

      &:hover {
        color: var(--oomol-text-primary) !important;
      }
    }

    > .menu__link--active {
      color: var(--ifm-menu-color-active) !important;

      &:hover {
        color: var(--ifm-menu-color-active) !important;
      }
    }
  }
}
